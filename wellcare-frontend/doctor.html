<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> ูุธุงู ุฅุฏุงุฑุฉ ุงูููุงุนูุฏ ุงูููุงุนูุฏ ุงูุทุจูุฉ</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<div class="header" style="background-color: #288fe2;">
  <h1> ุญุฌุฒ ุงูููุงุนูุฏ ุงูุทุจูุฉ</h1>
  <a href="../wellcare-frontend/index.html"><button class="main-menu-btn">ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button></a>
  <div id="userInfo">
  </div>
</div>

<div class="container">
  <div class="tabs">
    <div class="tab active" onclick="showTab('newAppointment')">ุฅุถุงูุฉ ููุนุงุฏ ุฌุฏูุฏ</div>
    <div class="tab" onclick="showTab('pendingRequests')">ุทูุจุงุช ุงูุญุฌุฒ</div>
    <div class="tab" onclick="showTab('acceptedRequests')">ุงูุฌูุณุงุช ุงููุคูุฏุฉ</div>
  </div>

  <div id="newAppointment" class="tab-content active">
    <h2 class="page-title">ุฅุถุงูุฉ ููุนุงุฏ ุฌุฏูุฏ</h2>
    
    <div class="appointment-form">
      <div class="form-row">
        <div class="form-group">
          <label for="doctorName">ุงุณู ุงูุทุจูุจ</label>
          <input type="text" id="doctorName" placeholder="ุฃุฏุฎู ุงุณู ุงูุทุจูุจ" required>
        </div>
        
        <div class="form-group">
          <label for="doctorSpecialty">ุงูุชุฎุตุต</label>
          <input type="text" id="doctorSpecialty" placeholder="ุฃุฏุฎู ุงูุชุฎุตุต ุงูุทุจู" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="appointmentDate">ุชุงุฑูุฎ ุงูููุนุงุฏ</label>
          <input type="date" id="appointmentDate" required>
        </div>
        
        <div class="form-group">
          <label for="appointmentTime">ููุช ุงูููุนุงุฏ</label>
          <input type="time" id="appointmentTime" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="appointmentDuration">ูุฏุฉ ุงูุฌูุณุฉ (ุจุงูุฏูุงุฆู)</label>
          <select id="appointmentDuration" required>
            <option value="15">15 ุฏูููุฉ</option>
            <option value="30" selected>30 ุฏูููุฉ</option>
            <option value="45">45 ุฏูููุฉ</option>
            <option value="60">60 ุฏูููุฉ</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="meetingLink">ุฑุงุจุท ุงูุงุฌุชูุงุน</label>
          <input type="url" id="meetingLink" placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุงุฌุชูุงุน" required>
        </div>
      </div>
      
      <button onclick="addAppointment()">ุฅุถุงูุฉ ุงูููุนุงุฏ</button>
    </div>
  </div>

  <div id="pendingRequests" class="tab-content">
    <h2 class="page-title">ุทูุจุงุช ุงูุญุฌุฒ</h2>
    <button onclick="loadPendingRequests()" class="refresh-btn" style="margin-bottom: 20px;">ุชุญุฏูุซ ุงููุงุฆูุฉ ๐</button>
    <div id="pendingRequestsList"></div>
  </div>

  <div id="acceptedRequests" class="tab-content">
    <h2 class="page-title">ุงูุฌูุณุงุช ุงููุคูุฏุฉ</h2>
    <button onclick="loadAcceptedRequests()" class="refresh-btn" style="margin-bottom: 20px;">ุชุญุฏูุซ ุงููุงุฆูุฉ ๐</button>
    <div id="acceptedRequestsList"></div>
  </div>
</div>

<script src="assets/js/main.js"></script>
<script>
  function showTab(tabId) {
    // ุฅุฎูุงุก ูู ุงููุญุชููุงุช
    const contents = document.querySelectorAll('.tab-content');
    contents.forEach(content => content.classList.remove('active'));
    
    // ุฅูุบุงุก ุชูุดูุท ูู ุงูุชุจููุจุงุช
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => tab.classList.remove('active'));
    
    // ุชูุดูุท ุงูุชุจููุจ ูุงููุญุชูู ุงููุทููุจ
    document.getElementById(tabId).classList.add('active');
    event.currentTarget.classList.add('active');
    
    // ุชุญููู ุงูุจูุงูุงุช ุงูููุงุณุจุฉ
    if (tabId === 'pendingRequests') {
      loadPendingRequests();
    } else if (tabId === 'acceptedRequests') {
      loadAcceptedRequests();
    }
  }
  
  // ุชููุฆุฉ ุงูุตูุญุฉ ุนูุฏ ุงูุชุญููู
  document.addEventListener('DOMContentLoaded', function() {
    // ุชููุฆุฉ ุงูุชุฎุฒูู ุงููุญูู
    setupStorage();
  });

    window.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const tab = urlParams.get('tab');

    if (tab === 'requests') {
      // ุดุบูู ุชุงุจ "ุทูุจุงุช ุงูุญุฌุฒ"
      document.querySelector('[data-tab="booking-requests"]').click();
    } else if (tab === 'confirmed') {
      document.querySelector('[data-tab="confirmed-sessions"]').click();
    } else if (tab === 'new') {
      document.querySelector('[data-tab="new-slot"]').click();
    }
  });
  
</script>

</body>
</html>